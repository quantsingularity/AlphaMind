apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.appName }}-secrets
  namespace: {{ .Values.namespace | default "alphamind-prod" }}
  annotations:
    description: "Encrypted secrets for AlphaMind application - PCI DSS compliant"
    compliance.alphamind.io/pci-dss: "true"
    compliance.alphamind.io/gdpr: "true"
    compliance.alphamind.io/sox: "true"
    compliance.alphamind.io/encryption: "aes-256-gcm"
    compliance.alphamind.io/rotation-policy: "90-days"
    compliance.alphamind.io/access-audit: "enabled"
  labels:
    app: {{ .Values.appName }}
    component: secrets
    security.alphamind.io/classification: "confidential"
    security.alphamind.io/data-type: "financial"
type: Opaque
data:
  database-url: {{ .Values.database.url | b64enc }}
  jwt-secret: {{ .Values.backend.jwtSecret | b64enc }}
  mysql-root-password: {{ .Values.database.rootPassword | b64enc }}
  mysql-password: {{ .Values.database.password | b64enc }}
  api-key: {{ .Values.backend.apiKey | b64enc }}
  encryption-key: {{ .Values.security.encryptionKey | b64enc }}
  backup-encryption-key: {{ .Values.security.backupEncryptionKey | b64enc }}
  audit-signing-key: {{ .Values.security.auditSigningKey | b64enc }}

---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.appName }}-tls-secrets
  namespace: {{ .Values.namespace | default "alphamind-prod" }}
  annotations:
    description: "TLS certificates and keys for secure communication"
    compliance.alphamind.io/pci-dss: "true"
    compliance.alphamind.io/certificate-authority: "{{ .Values.security.certificateAuthority }}"
    compliance.alphamind.io/expiry-date: "{{ .Values.security.certificateExpiry }}"
  labels:
    app: {{ .Values.appName }}
    component: tls
    security.alphamind.io/classification: "confidential"
type: kubernetes.io/tls
data:
  tls.crt: {{ .Values.security.tlsCert | b64enc }}
  tls.key: {{ .Values.security.tlsKey | b64enc }}
  ca.crt: {{ .Values.security.caCert | b64enc }}

---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.appName }}-db-backup-secret
  namespace: {{ .Values.namespace | default "alphamind-prod" }}
  annotations:
    description: "Database backup credentials with restricted access"
    compliance.alphamind.io/sox: "true"
    compliance.alphamind.io/backup-retention: "7-years"
    compliance.alphamind.io/access-restriction: "backup-service-only"
  labels:
    app: {{ .Values.appName }}
    component: backup
    security.alphamind.io/classification: "restricted"
type: Opaque
data:
  backup-user: {{ .Values.database.backupUser | b64enc }}
  backup-password: {{ .Values.database.backupPassword | b64enc }}
  backup-encryption-key: {{ .Values.security.backupEncryptionKey | b64enc }}

---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.appName }}-monitoring-secrets
  namespace: {{ .Values.namespace | default "alphamind-prod" }}
  annotations:
    description: "Monitoring and alerting credentials"
    compliance.alphamind.io/nist-csf: "detect"
  labels:
    app: {{ .Values.appName }}
    component: monitoring
    security.alphamind.io/classification: "internal"
type: Opaque
data:
  prometheus-auth: {{ .Values.monitoring.prometheusAuth | b64enc }}
  grafana-admin-password: {{ .Values.monitoring.grafanaAdminPassword | b64enc }}
  alertmanager-webhook-url: {{ .Values.monitoring.webhookUrl | b64enc }}
